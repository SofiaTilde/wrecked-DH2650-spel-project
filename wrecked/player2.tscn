[gd_scene load_steps=17 format=3 uid="uid://685x3hhuvr5l"]

[ext_resource type="Script" uid="uid://uuv10ct6y602" path="res://player_controller.gd" id="1_0dk0n"]
[ext_resource type="Script" uid="uid://6n2qlha5nso7" path="res://respawn_manager.gd" id="3_ih4i3"]
[ext_resource type="PackedScene" uid="uid://lw6bygjm0w6o" path="res://transitioner.tscn" id="4_cp8eo"]
[ext_resource type="PackedScene" uid="uid://b4t0xyhas5elu" path="res://items/effects/item_effect.tscn" id="5_bhnal"]
[ext_resource type="Curve" uid="uid://dkgh1n702cdyw" path="res://meshes/Characters/anim_curve.tres" id="6_8caby"]
[ext_resource type="PackedScene" uid="uid://cllykwqu7m0px" path="res://meshes/Characters/Yates_yellow.fbx" id="6_uqwy3"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_bhnal"]
height = 1.78
radius = 0.35

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_uqwy3"]
animation = &"Yayham|Drowning"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8caby"]
animation = &"Yayham|Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_61wwb"]
animation = &"Yayham|Itemuse"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2dedv"]
animation = &"Yayham|Jump"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_fqpan"]
filters = ["", "Yayham/Skeleton3D:Ankle.L", "Yayham/Skeleton3D:Ankle.R", "Yayham/Skeleton3D:Grasp.L", "Yayham/Skeleton3D:Grasp.R", "Yayham/Skeleton3D:Head", "Yayham/Skeleton3D:Middlethumb.L", "Yayham/Skeleton3D:Middlethumb.R", "Yayham/Skeleton3D:Pointfinger.L", "Yayham/Skeleton3D:Pointfinger.R", "Yayham/Skeleton3D:Pointfingermiddle.L", "Yayham/Skeleton3D:Pointfingermiddle.R", "Yayham/Skeleton3D:Pointfingertip.L", "Yayham/Skeleton3D:Pointfingertip.R", "Yayham/Skeleton3D:Thumptip.L", "Yayham/Skeleton3D:Thumptip.R", "Yayham/Skeleton3D:Toes.L", "Yayham/Skeleton3D:Toes.R", "Yayham/Skeleton3D:Upperbody", "Yayham/Skeleton3D:Upperfeet.L", "Yayham/Skeleton3D:Upperfeet.R", "Yayham/Skeleton3D:Upperthumb.R", "Yayham/Skeleton3D:Wrist.L", "Yayham/Skeleton3D:Wrist.R", "Yayham/Skeleton3D:hip", "Yayham/Skeleton3D:middlefinger.L", "Yayham/Skeleton3D:middlefinger.R", "Yayham/Skeleton3D:middlefingermiddle.L", "Yayham/Skeleton3D:middlefingermiddle.R", "Yayham/Skeleton3D:middlefingertip.L", "Yayham/Skeleton3D:middlefingertip.R", "Yayham/Skeleton3D:pinkyfinger.L", "Yayham/Skeleton3D:pinkyfinger.R", "Yayham/Skeleton3D:pinkyfingermiddle.L", "Yayham/Skeleton3D:pinkyfingermiddle.R", "Yayham/Skeleton3D:pinkyfingertip.L", "Yayham/Skeleton3D:pinkyfingertip.R", "Yayham/Skeleton3D:stomach", "Yayham/Skeleton3D:thumbpalm.R"]
sync = true
fadein_time = 0.1
fadeout_time = 0.3

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7gy1f"]
animation = &"Yayham|Running"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_uns0w"]
xfade_time = 0.2
xfade_curve = ExtResource("6_8caby")
input_0/name = "Idling"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "Running"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "Drowning"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_iwfv5"]
filter_enabled = true
filters = ["Yayham/Skeleton3D:Bodyrotation", "Yayham/Skeleton3D:Head", "Yayham/Skeleton3D:Upperbody", "Yayham/Skeleton3D:Wrist.L", "Yayham/Skeleton3D:Wrist.R"]
fadein_time = 0.1
fadeout_time = 0.1
break_loop_at_end = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_i62jw"]
graph_offset = Vector2(-222.137, -23.4515)
nodes/Drown/node = SubResource("AnimationNodeAnimation_uqwy3")
nodes/Drown/position = Vector2(-220, 400)
nodes/Idle/node = SubResource("AnimationNodeAnimation_8caby")
nodes/Idle/position = Vector2(-220, 40)
nodes/Itemuse/node = SubResource("AnimationNodeAnimation_61wwb")
nodes/Itemuse/position = Vector2(300, 640)
nodes/Jump/node = SubResource("AnimationNodeAnimation_2dedv")
nodes/Jump/position = Vector2(213.27, 420.298)
nodes/Jumping/node = SubResource("AnimationNodeOneShot_fqpan")
nodes/Jumping/position = Vector2(436.878, 112.837)
nodes/Run/node = SubResource("AnimationNodeAnimation_7gy1f")
nodes/Run/position = Vector2(-220, 220)
nodes/Transition/node = SubResource("AnimationNodeTransition_uns0w")
nodes/Transition/position = Vector2(120, 60)
nodes/Useitem/node = SubResource("AnimationNodeOneShot_iwfv5")
nodes/Useitem/position = Vector2(685.352, 194.072)
nodes/output/position = Vector2(920, 180)
node_connections = [&"Jumping", 0, &"Transition", &"Jumping", 1, &"Jump", &"Transition", 0, &"Idle", &"Transition", 1, &"Run", &"Transition", 2, &"Drown", &"Useitem", 0, &"Jumping", &"Useitem", 1, &"Itemuse", &"output", 0, &"Useitem"]

[node name="Player" type="CharacterBody3D"]
axis_lock_angular_x = true
axis_lock_angular_z = true
script = ExtResource("1_0dk0n")
player_id = 2

[node name="Yates_yellow" parent="." instance=ExtResource("6_uqwy3")]
transform = Transform3D(-1.5, 0, -1.31134e-07, 0, 1.5, 0, 1.31134e-07, 0, -1.5, 0, 0, 0)

[node name="Skeleton3D" parent="Yates_yellow/Yayham" index="0"]
bones/0/scale = Vector3(1, 1, 1)
bones/1/rotation = Quaternion(3.74275e-08, -3.0268e-09, -0.0249646, 0.999688)
bones/1/scale = Vector3(1, 1, 1)
bones/2/position = Vector3(-1.61082e-11, 0.000909785, -2.85218e-11)
bones/2/rotation = Quaternion(-0.00193929, 0.0776649, 0.0248892, 0.996667)
bones/2/scale = Vector3(1, 1, 1)
bones/3/position = Vector3(-0.000213512, 0.00323942, -7.41076e-11)
bones/3/rotation = Quaternion(-8.60472e-09, -3.30613e-10, -0.0189031, 0.999821)
bones/5/position = Vector3(0.0023083, 0.000138261, -3.91578e-05)
bones/5/rotation = Quaternion(-0.695442, -0.117579, 0.697031, -0.129161)
bones/5/scale = Vector3(1, 1, 1)
bones/6/position = Vector3(3.72529e-11, 0.000290667, 2.56114e-10)
bones/6/rotation = Quaternion(0.0162995, -0.00123974, 0.00720275, 0.99984)
bones/6/scale = Vector3(1, 1, 1)
bones/7/position = Vector3(0, 0.000194947, 7.21775e-11)
bones/7/rotation = Quaternion(0.0860178, 0.000412286, -0.00187432, 0.996292)
bones/7/scale = Vector3(1, 1, 1)
bones/8/position = Vector3(-0.000327515, 0.000173712, -2.27059e-05)
bones/8/rotation = Quaternion(0.0844724, 0.0261431, 0.101488, 0.990899)
bones/8/scale = Vector3(1, 1, 1)
bones/9/position = Vector3(7.45058e-11, 0.000217065, 7.45058e-11)
bones/9/rotation = Quaternion(0.121027, -0.00184972, -0.0184701, 0.992476)
bones/9/scale = Vector3(1, 1, 1)
bones/10/position = Vector3(-7.45058e-11, 0.000285383, 1.49012e-10)
bones/10/rotation = Quaternion(0.158871, 0.0064092, 0.0591698, 0.985504)
bones/10/scale = Vector3(1, 1, 1)
bones/12/position = Vector3(7.45058e-11, 0.000169619, 1.16415e-10)
bones/12/rotation = Quaternion(0.102121, 0.0181359, 0.00527533, 0.994593)
bones/12/scale = Vector3(1, 1, 1)
bones/13/position = Vector3(5.58794e-11, 0.000239806, -6.51926e-11)
bones/13/rotation = Quaternion(0.115248, 0.000430939, 0.00430954, 0.993327)
bones/13/scale = Vector3(1, 1, 1)
bones/14/position = Vector3(0, 0.000309009, -4.65661e-11)
bones/14/rotation = Quaternion(0.11478, 0.00475751, 0.0044172, 0.99337)
bones/14/scale = Vector3(1, 1, 1)
bones/16/position = Vector3(0.000317319, 0.000200169, -1.37288e-05)
bones/16/rotation = Quaternion(0.103668, 0.0181853, 0.00567341, 0.99443)
bones/16/scale = Vector3(1, 1, 1)
bones/17/position = Vector3(9.31323e-12, 0.000245226, 3.00934e-10)
bones/17/rotation = Quaternion(0.110944, 0.000312818, 0.00311739, 0.993822)
bones/17/scale = Vector3(1, 1, 1)
bones/18/position = Vector3(-1.92085e-11, 0.000293911, 9.42964e-11)
bones/18/rotation = Quaternion(0.106103, 0.0047749, 0.00518544, 0.99433)
bones/18/scale = Vector3(1, 1, 1)
bones/20/position = Vector3(-7.74142e-05, 0.000491004, 0.000140431)
bones/20/rotation = Quaternion(0.514421, -0.24349, 0.757009, 0.320969)
bones/20/scale = Vector3(1, 1, 1)
bones/21/position = Vector3(2.98023e-10, 0.000322647, -2.23517e-10)
bones/21/rotation = Quaternion(-0.293471, -0.127848, -0.559124, 0.764794)
bones/21/scale = Vector3(1, 1, 1)
bones/22/position = Vector3(-3.72529e-10, 0.000264355, 9.31323e-12)

bones/22/rotation = Quaternion(-0.248939, 0.0898901, -0.277814, 0.923455)
bones/23/position = Vector3(-3.72529e-11, 0.000351419, 6.51926e-11)
bones/23/rotation = Quaternion(-0.16697, -0.0162259, -0.132857, 0.976835)
bones/23/scale = Vector3(1, 1, 1)
bones/25/position = Vector3(-7.48876e-05, 0.00178856, 0.000456809)
bones/25/rotation = Quaternion(0.203174, 0.0178826, 0.0125056, 0.978899)
bones/27/position = Vector3(-0.0023083, 0.000138261, -3.91589e-05)
bones/27/rotation = Quaternion(0.695619, -0.118541, 0.696868, 0.128206)
bones/27/scale = Vector3(1, 1, 1)
bones/28/position = Vector3(0, 0.000290667, 8.3819e-11)
bones/28/rotation = Quaternion(0.0162996, 0.00124003, -0.00720275, 0.99984)
bones/28/scale = Vector3(1, 1, 1)
bones/29/position = Vector3(1.86265e-11, 0.000194946, -1.86265e-10)
bones/29/rotation = Quaternion(0.0860175, -0.000412406, 0.00187431, 0.996292)
bones/29/scale = Vector3(1, 1, 1)
bones/30/position = Vector3(0.000327514, 0.000173711, -2.27068e-05)
bones/30/rotation = Quaternion(0.133335, -0.0311266, -0.100072, 0.985515)
bones/30/scale = Vector3(1, 1, 1)
bones/31/position = Vector3(-5.58794e-11, 0.000217064, 1.72295e-10)
bones/31/rotation = Quaternion(0.169923, 0.00276057, 0.0183559, 0.985283)
bones/31/scale = Vector3(1, 1, 1)
bones/32/position = Vector3(0, 0.000285383, -1.15251e-10)
bones/32/rotation = Quaternion(0.207376, -0.00932517, -0.0587807, 0.976449)
bones/32/scale = Vector3(1, 1, 1)
bones/34/position = Vector3(0, 0.000169619, 0)
bones/34/rotation = Quaternion(0.151144, -0.0183749, -0.0043726, 0.988331)
bones/34/scale = Vector3(1, 1, 1)
bones/35/position = Vector3(-1.86265e-11, 0.000239806, -8.3819e-11)
bones/35/rotation = Quaternion(0.164193, -0.000643092, -0.00428303, 0.986419)
bones/35/scale = Vector3(1, 1, 1)
bones/36/position = Vector3(-4.65661e-11, 0.00030901, -1.35042e-10)
bones/36/rotation = Quaternion(0.163727, -0.00496979, -0.00417673, 0.986484)
bones/36/scale = Vector3(1, 1, 1)
bones/38/position = Vector3(-0.000317319, 0.00020017, -1.37292e-05)
bones/38/rotation = Quaternion(0.152681, -0.0184436, -0.00476774, 0.988092)
bones/38/scale = Vector3(1, 1, 1)
bones/39/position = Vector3(-1.11759e-10, 0.000245226, -1.58325e-10)
bones/39/rotation = Quaternion(0.159919, -0.000466342, -0.00309821, 0.987125)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(-6.51926e-11, 0.000293911, 4.65661e-11)
bones/40/rotation = Quaternion(0.155109, -0.00502514, -0.00494317, 0.987872)
bones/40/scale = Vector3(1, 1, 1)
bones/42/position = Vector3(7.74141e-05, 0.000491005, 0.00014043)
bones/42/rotation = Quaternion(-0.514421, -0.24349, 0.75701, -0.320968)
bones/42/scale = Vector3(1, 1, 1)
bones/43/position = Vector3(1.49012e-10, 0.000322647, 8.3819e-11)
bones/43/rotation = Quaternion(-0.293472, 0.127848, 0.559124, 0.764794)
bones/43/scale = Vector3(1, 1, 1)
bones/44/position = Vector3(9.31323e-12, 0.000264355, -1.3737e-10)
bones/44/rotation = Quaternion(-0.248939, -0.0898902, 0.277814, 0.923455)
bones/44/scale = Vector3(1, 1, 1)
bones/45/position = Vector3(-9.31323e-12, 0.000351419, 2.18279e-11)
bones/45/rotation = Quaternion(-0.16697, 0.016226, 0.132857, 0.976835)
bones/45/scale = Vector3(1, 1, 1)
bones/47/position = Vector3(7.48878e-05, 0.00178856, 0.000456808)
bones/47/rotation = Quaternion(0.251298, -0.0184787, -0.0116067, 0.967664)
bones/47/scale = Vector3(1, 1, 1)
bones/49/position = Vector3(0.000814851, -0.000534595, -0.000364427)


bones/49/rotation = Quaternion(0.993785, 5.98859e-05, -3.58111e-06, 0.11132)
bones/49/scale = Vector3(1, 1, 1.00001)
bones/50/position = Vector3(-3.91299e-11, 0.000539714, -2.36588e-11)
bones/50/rotation = Quaternion(-0.335325, 1.54786e-05, 9.9315e-05, 0.942103)
bones/50/scale = Vector3(1, 1, 1)
bones/51/position = Vector3(-2.22735e-11, 0.00059674, 4.62524e-11)
bones/51/rotation = Quaternion(-0.325837, -5.53118e-06, -5.72298e-05, 0.945426)
bones/51/scale = Vector3(1, 1, 1)
bones/53/rotation = Quaternion(2.17909e-08, 0.0769783, -1.68241e-09, 0.997033)
bones/55/position = Vector3(-0.000814851, -0.000534595, -6.97078e-05)


bones/55/rotation = Quaternion(0.993785, -5.98674e-05, 3.7464e-06, 0.11132)
bones/55/scale = Vector3(1, 1, 1.00001)
bones/56/position = Vector3(-5.42799e-11, 0.000539714, -2.53817e-11)
bones/56/rotation = Quaternion(-0.335325, -1.5434e-05, -9.92431e-05, 0.942103)
bones/57/position = Vector3(-8.00355e-13, 0.00059674, -2.53749e-11)
bones/57/rotation = Quaternion(-0.325837, 5.53118e-06, 5.72298e-05, 0.945426)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.953098, 0)
shape = SubResource("CylinderShape3D_bhnal")
debug_color = Color(0.894678, 0.000303416, 0.814324, 0.42)

[node name="TwistPivot" type="Node3D" parent="."]

[node name="PitchPivot" type="Node3D" parent="TwistPivot"]

[node name="Camera3D" type="Camera3D" parent="TwistPivot/PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 0.938397, 0.34556, 0, -0.34556, 0.938397, 0, 1.83717, 3.67014)
current = true

[node name="RespawnManager" type="Node" parent="."]
script = ExtResource("3_ih4i3")

[node name="ResetTimer" type="Timer" parent="RespawnManager"]
one_shot = true

[node name="transitioner" parent="RespawnManager" instance=ExtResource("4_cp8eo")]

[node name="ItemEffect" parent="." instance=ExtResource("5_bhnal")]

[node name="CoyoteTimer" type="Timer" parent="."]

[node name="Debub_label" type="Label" parent="."]
visible = false
offset_right = 40.0
offset_bottom = 41.0

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Yates_yellow")
tree_root = SubResource("AnimationNodeBlendTree_i62jw")
anim_player = NodePath("../Yates_yellow/AnimationPlayer")
parameters/Jumping/active = false
parameters/Jumping/internal_active = false
parameters/Jumping/request = 0
parameters/Transition/current_state = "Idling"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0
parameters/Useitem/active = false
parameters/Useitem/internal_active = false
parameters/Useitem/request = 0


[connection signal="timeout" from="RespawnManager/ResetTimer" to="RespawnManager" method="_on_ResetTimer_timeout"]

[editable path="Yates_yellow"]
