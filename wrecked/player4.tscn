[gd_scene load_steps=18 format=3 uid="uid://cloxm7yrf3dau"]

[ext_resource type="Script" uid="uid://uuv10ct6y602" path="res://player_controller.gd" id="1_tj0vx"]
[ext_resource type="PackedScene" uid="uid://v7af5qm7lyol" path="res://meshes/Characters/Pippi_pink.fbx" id="2_cp8eo"]
[ext_resource type="Script" uid="uid://6n2qlha5nso7" path="res://respawn_manager.gd" id="3_uqwy3"]
[ext_resource type="PackedScene" uid="uid://lw6bygjm0w6o" path="res://transitioner.tscn" id="4_8caby"]
[ext_resource type="Curve" uid="uid://dkgh1n702cdyw" path="res://meshes/Characters/anim_curve.tres" id="5_nokyd"]
[ext_resource type="PackedScene" uid="uid://b4t0xyhas5elu" path="res://items/effects/item_effect.tscn" id="5_qd3f5"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_qd3f5"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ir1ys"]
animation = &"Pippi_rig|Drowning"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ecs3r"]
animation = &"Pippi_rig|Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cp8eo"]
animation = &"Pippi_rig|Itemuse"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nokyd"]
animation = &"Pippi_rig|Jump"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_ir1ys"]
filters = ["", "Pippi_rig/Skeleton3D:Ankle.L", "Pippi_rig/Skeleton3D:Ankle.R", "Pippi_rig/Skeleton3D:Grasp.L", "Pippi_rig/Skeleton3D:Grasp.R", "Pippi_rig/Skeleton3D:Head", "Pippi_rig/Skeleton3D:Middlethumb.L", "Pippi_rig/Skeleton3D:Middlethumb.R", "Pippi_rig/Skeleton3D:Pointfinger.L", "Pippi_rig/Skeleton3D:Pointfinger.R", "Pippi_rig/Skeleton3D:Pointfingermiddle.L", "Pippi_rig/Skeleton3D:Pointfingermiddle.R", "Pippi_rig/Skeleton3D:Pointfingertip.L", "Pippi_rig/Skeleton3D:Pointfingertip.R", "Pippi_rig/Skeleton3D:Thumptip.L", "Pippi_rig/Skeleton3D:Thumptip.R", "Pippi_rig/Skeleton3D:Toes.L", "Pippi_rig/Skeleton3D:Toes.R", "Pippi_rig/Skeleton3D:Upperbody", "Pippi_rig/Skeleton3D:Upperfeet.L", "Pippi_rig/Skeleton3D:Upperfeet.R", "Pippi_rig/Skeleton3D:Upperthumb.R", "Pippi_rig/Skeleton3D:Wrist.L", "Pippi_rig/Skeleton3D:Wrist.R", "Pippi_rig/Skeleton3D:hip", "Pippi_rig/Skeleton3D:middlefinger.L", "Pippi_rig/Skeleton3D:middlefinger.R", "Pippi_rig/Skeleton3D:middlefingermiddle.L", "Pippi_rig/Skeleton3D:middlefingermiddle.R", "Pippi_rig/Skeleton3D:middlefingertip.L", "Pippi_rig/Skeleton3D:middlefingertip.R", "Pippi_rig/Skeleton3D:pinkyfinger.L", "Pippi_rig/Skeleton3D:pinkyfinger.R", "Pippi_rig/Skeleton3D:pinkyfingermiddle.L", "Pippi_rig/Skeleton3D:pinkyfingermiddle.R", "Pippi_rig/Skeleton3D:pinkyfingertip.L", "Pippi_rig/Skeleton3D:pinkyfingertip.R", "Pippi_rig/Skeleton3D:stomach", "Pippi_rig/Skeleton3D:thumbpalm.R"]
sync = true
fadein_time = 0.1
fadeout_time = 0.3

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5d6fq"]
animation = &"Pippi_rig|Running"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_t13om"]
xfade_time = 0.2
xfade_curve = ExtResource("5_nokyd")
input_0/name = "Idling"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "Running"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true
input_2/name = "Drowning"
input_2/auto_advance = false
input_2/break_loop_at_end = false
input_2/reset = true

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_ecs3r"]
filter_enabled = true
filters = ["Pippi_rig/Skeleton3D:Bodyrotation", "Pippi_rig/Skeleton3D:Head", "Pippi_rig/Skeleton3D:Upperbody", "Pippi_rig/Skeleton3D:Wrist.L", "Pippi_rig/Skeleton3D:Wrist.R"]
fadein_time = 0.1
fadeout_time = 0.1
break_loop_at_end = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_80pio"]
graph_offset = Vector2(-336, 36.9232)
nodes/Drown/node = SubResource("AnimationNodeAnimation_ir1ys")
nodes/Drown/position = Vector2(-300, 440)
nodes/Idle/node = SubResource("AnimationNodeAnimation_ecs3r")
nodes/Idle/position = Vector2(-280, 40)
nodes/Itemuse/node = SubResource("AnimationNodeAnimation_cp8eo")
nodes/Itemuse/position = Vector2(280, 520)
nodes/Jump/node = SubResource("AnimationNodeAnimation_nokyd")
nodes/Jump/position = Vector2(20, 460)
"nodes/Jumping /node" = SubResource("AnimationNodeOneShot_ir1ys")
"nodes/Jumping /position" = Vector2(300, 140)
nodes/Run/node = SubResource("AnimationNodeAnimation_5d6fq")
nodes/Run/position = Vector2(-300, 240)
nodes/Transition/node = SubResource("AnimationNodeTransition_t13om")
nodes/Transition/position = Vector2(60, 60)
nodes/Useitem/node = SubResource("AnimationNodeOneShot_ecs3r")
nodes/Useitem/position = Vector2(538.789, 193.149)
nodes/output/position = Vector2(860, 200)
node_connections = [&"Jumping ", 0, &"Transition", &"Jumping ", 1, &"Jump", &"Transition", 0, &"Idle", &"Transition", 1, &"Run", &"Transition", 2, &"Drown", &"Useitem", 0, &"Jumping ", &"Useitem", 1, &"Itemuse", &"output", 0, &"Useitem"]

[sub_resource type="BoxShape3D" id="BoxShape3D_qd3f5"]
size = Vector3(1, 0.176758, 1)

[node name="Player4" type="CharacterBody3D"]
script = ExtResource("1_tj0vx")
player_id = 4

[node name="Pippi_pink" parent="." instance=ExtResource("2_cp8eo")]
transform = Transform3D(-1.5, 0, -1.31134e-07, 0, 1.5, 0, 1.31134e-07, 0, -1.5, 0, 0, 0)

[node name="Skeleton3D" parent="Pippi_pink/Pippi_rig" index="0"]
bones/1/rotation = Quaternion(1.95907e-08, 9.74454e-10, -0.0258677, 0.999665)
bones/2/rotation = Quaternion(-0.00195123, 0.0727122, 0.0267551, 0.996992)
bones/3/position = Vector3(-0.000213512, 0.00323942, -8.08684e-11)
bones/3/rotation = Quaternion(-8.9077e-09, -4.5607e-09, -0.0125649, 0.999921)
bones/5/position = Vector3(0.0023083, 0.000138261, -3.91578e-05)
bones/5/rotation = Quaternion(-0.695476, -0.117765, 0.697, -0.128978)
bones/8/rotation = Quaternion(0.0835859, 0.0260527, 0.101511, 0.990974)
bones/9/rotation = Quaternion(0.12014, -0.00183362, -0.0184717, 0.992584)
bones/10/rotation = Quaternion(0.157989, 0.00635628, 0.0591754, 0.985646)
bones/12/rotation = Quaternion(0.101231, 0.0181312, 0.00529154, 0.994684)
bones/13/rotation = Quaternion(0.114359, 0.00042732, 0.00430988, 0.99343)
bones/14/rotation = Quaternion(0.113891, 0.00475332, 0.00442148, 0.993472)
bones/16/rotation = Quaternion(0.102778, 0.0181805, 0.00568964, 0.994522)
bones/17/rotation = Quaternion(0.110055, 0.000309737, 0.00311771, 0.993921)
bones/18/rotation = Quaternion(0.105214, 0.00477026, 0.00518972, 0.994425)
bones/22/rotation = Quaternion(-0.248939, 0.0898901, -0.277814, 0.923455)
bones/23/rotation = Quaternion(-0.16697, -0.016226, -0.132857, 0.976835)
bones/25/rotation = Quaternion(0.202299, 0.0178715, 0.0125216, 0.979081)
bones/27/position = Vector3(-0.0023083, 0.000138261, -3.91588e-05)
bones/27/rotation = Quaternion(0.695586, -0.11836, 0.696899, 0.128387)
bones/30/rotation = Quaternion(0.134216, -0.031216, -0.100044, 0.985395)
bones/31/rotation = Quaternion(0.170805, 0.00277698, 0.0183534, 0.98513)
bones/32/rotation = Quaternion(0.208249, -0.00937772, -0.0587722, 0.976263)
bones/34/rotation = Quaternion(0.152028, -0.0183785, -0.00435622, 0.988196)
bones/35/rotation = Quaternion(0.165075, -0.000647219, -0.0042824, 0.986272)
bones/36/rotation = Quaternion(0.16461, -0.00497353, -0.00417229, 0.986338)
bones/38/rotation = Quaternion(0.153565, -0.0184478, -0.00475125, 0.987955)
bones/39/rotation = Quaternion(0.160802, -0.000469112, -0.0030978, 0.986982)
bones/40/rotation = Quaternion(0.155992, -0.00502956, -0.00493868, 0.987733)
bones/42/rotation = Quaternion(-0.514421, -0.24349, 0.75701, -0.320968)
bones/43/rotation = Quaternion(-0.293472, 0.127848, 0.559124, 0.764794)
bones/44/rotation = Quaternion(-0.248939, -0.0898902, 0.277814, 0.923455)
bones/45/rotation = Quaternion(-0.16697, 0.0162259, 0.132857, 0.976835)
bones/47/rotation = Quaternion(0.252164, -0.018489, -0.0115902, 0.967439)
bones/49/rotation = Quaternion(0.993785, 5.9886e-05, -3.58e-06, 0.11132)
bones/50/rotation = Quaternion(-0.335326, 1.54783e-05, 9.93149e-05, 0.942102)
bones/51/rotation = Quaternion(-0.325836, -5.53104e-06, -5.72296e-05, 0.945426)
bones/53/rotation = Quaternion(2.17978e-08, 0.0727384, -1.58975e-09, 0.997351)
bones/55/rotation = Quaternion(0.993785, -5.98675e-05, 3.74529e-06, 0.11132)
bones/56/rotation = Quaternion(-0.335326, -1.54336e-05, -9.9243e-05, 0.942102)
bones/57/rotation = Quaternion(-0.325836, 5.53105e-06, 5.72296e-05, 0.945426)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.904571, 0)
shape = SubResource("CylinderShape3D_qd3f5")
debug_color = Color(0.894678, 0.000303416, 0.814324, 0.42)

[node name="TwistPivot" type="Node3D" parent="."]

[node name="PitchPivot" type="Node3D" parent="TwistPivot"]

[node name="Camera3D" type="Camera3D" parent="TwistPivot/PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 0.938397, 0.34556, 0, -0.34556, 0.938397, 0, 1.83717, 3.67014)
current = true

[node name="RespawnManager" type="Node" parent="."]
script = ExtResource("3_uqwy3")

[node name="ResetTimer" type="Timer" parent="RespawnManager"]
one_shot = true

[node name="transitioner" parent="RespawnManager" instance=ExtResource("4_8caby")]

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Pippi_pink")
tree_root = SubResource("AnimationNodeBlendTree_80pio")
anim_player = NodePath("../Pippi_pink/AnimationPlayer")
"parameters/Jumping /active" = false
"parameters/Jumping /internal_active" = false
"parameters/Jumping /request" = 0
parameters/Transition/current_state = "Idling"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0
parameters/Useitem/active = false
parameters/Useitem/internal_active = false
parameters/Useitem/request = 0

[node name="ItemEffect" parent="." instance=ExtResource("5_qd3f5")]

[node name="SwimPlatform" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SwimPlatform"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.387199, 0)
shape = SubResource("BoxShape3D_qd3f5")

[connection signal="timeout" from="RespawnManager/ResetTimer" to="RespawnManager" method="_on_ResetTimer_timeout"]

[editable path="Pippi_pink"]
