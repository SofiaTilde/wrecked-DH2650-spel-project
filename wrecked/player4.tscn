[gd_scene load_steps=25 format=3 uid="uid://cloxm7yrf3dau"]

[ext_resource type="Script" uid="uid://uuv10ct6y602" path="res://player_controller.gd" id="1_tj0vx"]
[ext_resource type="Script" uid="uid://6n2qlha5nso7" path="res://respawn_manager.gd" id="3_uqwy3"]
[ext_resource type="PackedScene" uid="uid://lw6bygjm0w6o" path="res://transitioner.tscn" id="4_8caby"]
[ext_resource type="PackedScene" uid="uid://b4t0xyhas5elu" path="res://items/effects/item_effect.tscn" id="5_qd3f5"]
[ext_resource type="PackedScene" uid="uid://v7af5qm7lyol" path="res://meshes/Characters/Pippi_pink.fbx" id="6_ih4i3"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_qd3f5"]
height = 1.6
radius = 0.35

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hqtel"]
animation = &"Pippi_rig|Drowning"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2hs0m"]
animation = &"Pippi_rig|Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1jxqw"]
animation = &"Pippi_rig|Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sweqy"]
animation = &"Pippi_rig|Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_dw050"]
animation = &"Pippi_rig|Itemuse"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1jxqw"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2hs0m"]
xfade_time = 0.5
reset = false

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dw050"]
xfade_time = 0.75
break_loop_at_end = true
reset = false

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b26j0"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sweqy"]
xfade_time = 0.1
reset = false

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_n7ghd"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nvl01"]
xfade_time = 0.7
break_loop_at_end = true

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ivps1"]
xfade_time = 0.75
break_loop_at_end = true

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_tj0vx"]
states/Drowning/node = SubResource("AnimationNodeAnimation_hqtel")
states/Drowning/position = Vector2(567, 419)
states/Idle/node = SubResource("AnimationNodeAnimation_2hs0m")
states/Idle/position = Vector2(499, 210)
states/Jumping/node = SubResource("AnimationNodeAnimation_1jxqw")
states/Jumping/position = Vector2(772, 295)
states/Running/node = SubResource("AnimationNodeAnimation_sweqy")
states/Running/position = Vector2(230, 329)
states/Start/position = Vector2(231, 91)
states/Throw/node = SubResource("AnimationNodeAnimation_dw050")
states/Throw/position = Vector2(629, 77)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_1jxqw"), "Idle", "Running", SubResource("AnimationNodeStateMachineTransition_2hs0m"), "Running", "Idle", SubResource("AnimationNodeStateMachineTransition_dw050"), "Idle", "Jumping", SubResource("AnimationNodeStateMachineTransition_b26j0"), "Jumping", "Idle", SubResource("AnimationNodeStateMachineTransition_sweqy"), "Idle", "Drowning", SubResource("AnimationNodeStateMachineTransition_n7ghd"), "Idle", "Throw", SubResource("AnimationNodeStateMachineTransition_nvl01"), "Throw", "Idle", SubResource("AnimationNodeStateMachineTransition_ivps1")]
graph_offset = Vector2(-64, -92)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qd3f5"]
animation = &"Pippi_rig|Running"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ih4i3"]
animation = &"Pippi_rig|Idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_cp8eo"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_nokyd"]
graph_offset = Vector2(-429.242, 21.129)
nodes/Animation/node = SubResource("AnimationNodeAnimation_ih4i3")
nodes/Animation/position = Vector2(-500, 140)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_qd3f5")
"nodes/Animation 2/position" = Vector2(-326.417, 355.549)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_cp8eo")
nodes/Blend2/position = Vector2(-160, 100)
node_connections = [&"Blend2", 0, &"Animation", &"Blend2", 1, &"Animation 2"]

[node name="Player4" type="CharacterBody3D"]
script = ExtResource("1_tj0vx")
player_id = 4

[node name="Pippi_pink" parent="." instance=ExtResource("6_ih4i3")]
transform = Transform3D(-1.5, 0, -1.31134e-07, 0, 1.5, 0, 1.31134e-07, 0, -1.5, 0, 0, 0)

[node name="Skeleton3D" parent="Pippi_pink/Pippi_rig" index="0"]
bones/1/rotation = Quaternion(6.71794e-08, -1.19209e-07, -2.48869e-15, 1)
bones/2/rotation = Quaternion(-0.238731, -0.0176078, 0.071418, 0.968296)
bones/3/position = Vector3(-1.30967e-10, 0.00316269, -7.1479e-10)
bones/3/rotation = Quaternion(0.093528, 3.9619e-09, 2.82543e-08, 0.995617)
bones/5/position = Vector3(0.00211761, -0.000189327, -5.83429e-05)
bones/5/rotation = Quaternion(-0.72636, -0.290611, 0.556082, -0.280569)
bones/8/rotation = Quaternion(0.41675, 0.0591306, 0.0865265, 0.90296)
bones/9/rotation = Quaternion(0.451659, -0.0080273, -0.0167371, 0.891998)
bones/10/rotation = Quaternion(0.484868, 0.026169, 0.0534538, 0.87256)
bones/12/rotation = Quaternion(0.434602, 0.0188486, -0.00121363, 0.900425)
bones/13/rotation = Quaternion(0.446514, 0.00187247, 0.00390532, 0.894766)
bones/14/rotation = Quaternion(0.446089, 0.00597687, 0.00253391, 0.894965)
bones/16/rotation = Quaternion(0.436001, 0.0190307, -0.000856238, 0.899745)
bones/17/rotation = Quaternion(0.442636, 0.00135512, 0.00282482, 0.896696)
bones/18/rotation = Quaternion(0.438257, 0.00625494, 0.00325025, 0.898822)
bones/22/rotation = Quaternion(-0.248939, 0.08989, -0.277814, 0.923455)
bones/23/rotation = Quaternion(-0.153362, -0.0461899, -0.374681, 0.913215)
bones/25/rotation = Quaternion(0.524278, 0.0210718, 0.00567106, 0.851268)
bones/27/position = Vector3(-0.00310796, 0.00322732, 0.00173543)
bones/27/rotation = Quaternion(0.47191, 0.693121, 0.133142, 0.528354)
bones/30/rotation = Quaternion(-0.0364756, 0.170563, -0.0714187, 0.982078)
bones/31/rotation = Quaternion(-0.0228845, 0.180936, 0.0559379, 0.981636)
bones/32/rotation = Quaternion(0.0291273, 0.181763, -0.0138441, 0.982813)
bones/34/rotation = Quaternion(0.00246904, -0.0175199, -0.00705688, 0.999819)
bones/35/rotation = Quaternion(0.0156572, 7.67557e-07, -0.00433105, 0.999868)
bones/36/rotation = Quaternion(0.0151873, -0.00429335, -0.00486945, 0.999864)
bones/38/rotation = Quaternion(0.0040248, -0.0175293, -0.00745782, 0.99981)
bones/39/rotation = Quaternion(0.0113259, -3.64164e-07, -0.00313313, 0.999931)
bones/40/rotation = Quaternion(0.00645831, -0.00423406, -0.0056356, 0.999954)
bones/42/rotation = Quaternion(-0.514421, -0.24349, 0.75701, -0.320968)
bones/43/rotation = Quaternion(-0.293472, 0.127848, 0.559124, 0.764794)
bones/44/rotation = Quaternion(-0.248939, -0.0898901, 0.277814, 0.923455)
bones/45/rotation = Quaternion(-0.16697, 0.0162259, 0.132857, 0.976835)
bones/47/rotation = Quaternion(0.104584, -0.0165468, -0.014226, 0.994277)
bones/49/rotation = Quaternion(0.993785, 5.9886e-05, -3.58e-06, 0.11132)
bones/50/rotation = Quaternion(-0.335326, 1.54783e-05, 9.93149e-05, 0.942102)
bones/51/rotation = Quaternion(-0.325836, -5.53104e-06, -5.72296e-05, 0.945426)
bones/53/rotation = Quaternion(-0.238731, -0.0176079, 0.071418, 0.968296)
bones/55/position = Vector3(-0.0012493, -0.000534595, -0.000364427)
bones/55/rotation = Quaternion(0.960762, -0.254054, -0.0284481, 0.107624)
bones/56/rotation = Quaternion(-0.335326, -1.54226e-05, -9.92601e-05, 0.942102)
bones/57/rotation = Quaternion(-0.325836, 5.52435e-06, 5.72257e-05, 0.945426)

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.860766, 0)
shape = SubResource("CylinderShape3D_qd3f5")
debug_color = Color(0.894678, 0.000303416, 0.814324, 0.42)

[node name="TwistPivot" type="Node3D" parent="."]

[node name="PitchPivot" type="Node3D" parent="TwistPivot"]

[node name="Camera3D" type="Camera3D" parent="TwistPivot/PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 0.938397, 0.34556, 0, -0.34556, 0.938397, 0, 1.83717, 3.67014)
current = true

[node name="RespawnManager" type="Node" parent="."]
script = ExtResource("3_uqwy3")

[node name="ResetTimer" type="Timer" parent="RespawnManager"]
one_shot = true

[node name="transitioner" parent="RespawnManager" instance=ExtResource("4_8caby")]

[node name="oldAnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Pippi_pink")
tree_root = SubResource("AnimationNodeStateMachine_tj0vx")
anim_player = NodePath("../Pippi_pink/AnimationPlayer")

[node name="ItemEffect" parent="." instance=ExtResource("5_qd3f5")]

[node name="CoyoteTimer" type="Timer" parent="."]

[node name="Debub_label" type="Label" parent="."]
visible = false
offset_right = 40.0
offset_bottom = 41.0

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Pippi_pink")
tree_root = SubResource("AnimationNodeBlendTree_nokyd")
anim_player = NodePath("../Pippi_pink/AnimationPlayer")
parameters/Blend2/blend_amount = 0

[connection signal="timeout" from="RespawnManager/ResetTimer" to="RespawnManager" method="_on_ResetTimer_timeout"]

[editable path="Pippi_pink"]
