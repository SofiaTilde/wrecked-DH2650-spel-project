[gd_scene load_steps=13 format=3 uid="uid://g4tbrr3sfui2"]

[ext_resource type="Script" uid="uid://uuv10ct6y602" path="res://player_controller.gd" id="1_4flbx"]
[ext_resource type="PackedScene" uid="uid://ci17mdsvxbc5j" path="res://meshes/placeholdercharacter/PlaceholderCharacter.glb" id="2_onrkg"]
[ext_resource type="PackedScene" uid="uid://bbfcgykisxrxu" path="res://meshes/Characters/Rackham_red.fbx" id="2_sweqy"]
[ext_resource type="PackedScene" uid="uid://lw6bygjm0w6o" path="res://transitioner.tscn" id="3_i3pqv"]
[ext_resource type="Script" uid="uid://6n2qlha5nso7" path="res://respawn_manager.gd" id="4_hqtel"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2hs0m"]
animation = &"rig_Rackham_the_red|Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sweqy"]
animation = &"rig_Rackham_the_red|Running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1jxqw"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_2hs0m"]
xfade_time = 0.5
reset = false

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_dw050"]
xfade_time = 0.75
break_loop_at_end = true
reset = false

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_dw050"]
states/Idle/node = SubResource("AnimationNodeAnimation_2hs0m")
states/Idle/position = Vector2(498, 211)
states/Running/node = SubResource("AnimationNodeAnimation_sweqy")
states/Running/position = Vector2(230, 329)
states/Start/position = Vector2(231, 91)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_1jxqw"), "Idle", "Running", SubResource("AnimationNodeStateMachineTransition_2hs0m"), "Running", "Idle", SubResource("AnimationNodeStateMachineTransition_dw050")]
graph_offset = Vector2(-338, 87)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_onrkg"]
radius = 0.32
height = 1.9

[node name="Player" type="CharacterBody3D"]
axis_lock_angular_x = true
axis_lock_angular_z = true
script = ExtResource("1_4flbx")

[node name="Rackham_red" parent="." instance=ExtResource("2_sweqy")]
transform = Transform3D(-1.5, 0, -1.31134e-07, 0, 1.5, 0, 1.31134e-07, 0, -1.5, 0, 0, 0)

[node name="Skeleton3D" parent="Rackham_red/rig_Rackham_the_red" index="0"]
bones/5/rotation = Quaternion(-0.688927, -0.0861017, 0.701615, -0.160319)
bones/8/rotation = Quaternion(0.135198, 0.0313157, 0.100013, 0.985261)
bones/9/rotation = Quaternion(0.171786, -0.00279521, -0.0183508, 0.984959)
bones/10/rotation = Quaternion(0.209221, 0.00943632, 0.058763, 0.976055)
bones/12/rotation = Quaternion(0.153013, 0.0183829, 0.00433793, 0.988044)
bones/14/rotation = Quaternion(0.165592, 0.00497768, 0.00416734, 0.986173)
bones/16/rotation = Quaternion(0.154549, 0.0184526, 0.00473302, 0.987801)
bones/17/rotation = Quaternion(0.161785, 0.000472032, 0.00309723, 0.986821)
bones/18/rotation = Quaternion(0.156976, 0.00503464, 0.00493365, 0.987577)
bones/22/rotation = Quaternion(-0.248939, 0.0898902, -0.277814, 0.923455)
bones/23/rotation = Quaternion(-0.16697, -0.0162259, -0.132857, 0.976835)
bones/25/rotation = Quaternion(0.253128, 0.0185008, 0.0115717, 0.967187)
bones/27/rotation = Quaternion(0.700595, -0.149144, 0.690965, 0.0974173)
bones/30/rotation = Quaternion(0.0825987, -0.0259515, -0.101537, 0.991057)
bones/31/rotation = Quaternion(0.119151, 0.00181524, 0.0184735, 0.992703)
bones/32/rotation = Quaternion(0.157008, -0.00629707, -0.0591817, 0.985802)
bones/34/rotation = Quaternion(0.10024, -0.0181257, -0.00530962, 0.994784)
bones/35/rotation = Quaternion(0.11337, -0.000422983, -0.00431031, 0.993543)
bones/36/rotation = Quaternion(0.112902, -0.00474902, -0.0044262, 0.993585)
bones/38/rotation = Quaternion(0.101788, -0.0181746, -0.00570784, 0.994624)
bones/39/rotation = Quaternion(0.109066, -0.000306772, -0.00311791, 0.99403)
bones/40/rotation = Quaternion(0.104224, -0.00476486, -0.00519448, 0.994529)
bones/42/rotation = Quaternion(-0.514421, -0.24349, 0.75701, -0.320968)
bones/43/rotation = Quaternion(-0.293472, 0.127847, 0.559124, 0.764794)
bones/44/rotation = Quaternion(-0.248939, -0.0898907, 0.277814, 0.923455)
bones/45/rotation = Quaternion(-0.16697, 0.0162261, 0.132857, 0.976835)
bones/47/rotation = Quaternion(0.201323, -0.0178587, -0.0125395, 0.979282)
bones/49/rotation = Quaternion(0.993785, 5.98821e-05, -3.61475e-06, 0.11132)
bones/50/rotation = Quaternion(-0.335326, 1.55097e-05, 9.93278e-05, 0.942102)
bones/51/rotation = Quaternion(-0.325835, -5.53001e-06, -5.72282e-05, 0.945427)
bones/55/rotation = Quaternion(0.993785, -5.9871e-05, 3.71455e-06, 0.11132)
bones/56/rotation = Quaternion(-0.335326, -1.5403e-05, -9.92338e-05, 0.942102)
bones/57/rotation = Quaternion(-0.325835, 5.53001e-06, 5.72282e-05, 0.945427)

[node name="AnimationTree" type="AnimationTree" parent="Rackham_red"]
tree_root = SubResource("AnimationNodeStateMachine_dw050")
anim_player = NodePath("../AnimationPlayer")

[node name="PlaceholderCharacter" parent="." instance=ExtResource("2_onrkg")]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, -1.00602, 0)
visible = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.00671, 0)
shape = SubResource("CapsuleShape3D_onrkg")
debug_color = Color(0.894678, 0.000303416, 0.814324, 0.42)

[node name="TwistPivot" type="Node3D" parent="."]

[node name="PitchPivot" type="Node3D" parent="TwistPivot"]

[node name="Camera3D" type="Camera3D" parent="TwistPivot/PitchPivot"]
transform = Transform3D(1, 0, 0, 0, 0.938397, 0.34556, 0, -0.34556, 0.938397, 0, 1.83717, 3.67014)
current = true

[node name="RespawnManager" type="Node" parent="."]
script = ExtResource("4_hqtel")

[node name="ResetTimer" type="Timer" parent="RespawnManager"]
one_shot = true

[node name="transitioner" parent="RespawnManager" instance=ExtResource("3_i3pqv")]

[node name="ItemEffect" type="Node3D" parent="."]

[node name="TextureRect" type="TextureRect" parent="ItemEffect"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
expand_mode = 1

[connection signal="timeout" from="RespawnManager/ResetTimer" to="RespawnManager" method="_on_ResetTimer_timeout"]

[editable path="Rackham_red"]
